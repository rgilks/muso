(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6221:(e,t,r)=>{Promise.resolve().then(r.bind(r,8577))},8577:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(5155),a=r(2115);function l(){let e=(0,a.useRef)(null),[t,r]=(0,a.useState)(!1),l=(0,a.useRef)(null),u=(0,a.useRef)(null),i=(0,a.useRef)(null),c=(0,a.useRef)(null),s=(0,a.useRef)(null),o=(0,a.useRef)(null),d=(0,a.useRef)(null),m=(0,a.useRef)(null),f=(0,a.useRef)(null),p=(0,a.useRef)(null),h=(0,a.useRef)(null),g=(0,a.useRef)(null),x=(0,a.useRef)(null),w=(0,a.useRef)(null);async function v(){if(t)return;let n=new AudioContext({sampleRate:48e3});o.current=n;let a=new URL("/dsp/dsp.js",window.location.origin).toString();x.current=await import(a),await x.current.default("/dsp/dsp_bg.wasm"),x.current.init_engine(n.sampleRate),await n.audioWorklet.addModule("/worklet/processor.js");let v=new AudioWorkletNode(n,"rust-dsp",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[2]});m.current=v,v.port.postMessage({type:"config",sampleRate:n.sampleRate}),v.port.onmessage=e=>{var t,r;if((null==(t=e.data)?void 0:t.type)==="pull"){let t=new Float32Array(2*e.data.frames);null==(r=x.current)||r.render_into(t),v.port.postMessage({type:"block",buf:t},[t.buffer])}};let M=n.createAnalyser();M.fftSize=2048,d.current=M,v.connect(M);let b=n.createBiquadFilter();b.type="lowpass";let y=c.current?parseFloat(c.current.value):6e3,R=s.current?parseFloat(s.current.value):.7;b.frequency.value=isFinite(y)?y:6e3,b.Q.value=isFinite(R)?R:.7,p.current=b;let _=n.createGain();f.current=_;let F=i.current?parseFloat(i.current.value):.8;_.gain.value=isFinite(F)?F:.8,M.connect(b),b.connect(_),_.connect(n.destination);let N=()=>x.current.set_reverb(parseFloat(l.current.value),parseFloat(u.current.value));N();let j=l.current,A=u.current,C=i.current,E=c.current,T=s.current;j.addEventListener("input",N),A.addEventListener("input",N);let L=()=>{if(f.current&&i.current){let e=parseFloat(i.current.value);f.current.gain.value=isFinite(e)?e:f.current.gain.value}},k=()=>{if(p.current&&c.current&&o.current){let e=parseFloat(c.current.value);p.current.frequency.setTargetAtTime(Math.max(20,Math.min(2e4,isFinite(e)?e:p.current.frequency.value)),o.current.currentTime,.01)}},S=()=>{if(p.current&&s.current&&o.current){let e=parseFloat(s.current.value);p.current.Q.setTargetAtTime(Math.max(1e-4,isFinite(e)?e:p.current.Q.value),o.current.currentTime,.01)}};C.addEventListener("input",L),E.addEventListener("input",k),T.addEventListener("input",S),g.current=()=>{j.removeEventListener("input",N),A.removeEventListener("input",N),C.removeEventListener("input",L),E.removeEventListener("input",k),T.removeEventListener("input",S)};let q=e.current,O=q.getContext("2d"),z=()=>{let e=Math.max(1,Math.min(3,window.devicePixelRatio||1)),t=Math.max(300,Math.round(q.getBoundingClientRect().width)),r=Math.max(160,Math.min(480,Math.round(.28*t)));q.style.height="".concat(r,"px"),q.width=Math.floor(t*e),q.height=Math.floor(r*e),O.setTransform(1,0,0,1,0,0),O.scale(e,e)};z(),window.addEventListener("resize",()=>z());let V=document.createElement("canvas");V.width=256,V.height=256;let I=V.getContext("2d"),B=I.createImageData(V.width,V.height);for(let e=0;e<B.data.length;e+=4){let t=255*Math.random()|0;B.data[e+0]=0,B.data[e+1]=t,B.data[e+2]=0,B.data[e+3]=t>200?20:12}I.putImageData(B,0,0),w.current=V;let P=()=>{let e=d.current;if(!e)return;let t=new Uint8Array(e.frequencyBinCount),r=Math.max(1,Math.min(3,window.devicePixelRatio||1)),n=q.width/r,a=q.height/r;e.getByteFrequencyData(t),O.fillStyle="#070a12",O.fillRect(0,0,n,a);let l=O.createRadialGradient(.5*n,.5*a,.1*Math.min(n,a),.5*n,.5*a,.7*Math.max(n,a));l.addColorStop(0,"rgba(0,255,120,0.02)"),l.addColorStop(1,"rgba(0,0,0,0.35)"),O.fillStyle=l,O.fillRect(0,0,n,a);let u=n/128,i=O.createLinearGradient(0,a,0,0);i.addColorStop(0,"#093"),i.addColorStop(1,"#0f8"),O.fillStyle=i;for(let e=0;e<128;e++){let r=Math.floor(e*t.length/128),n=Math.floor((e+1)*t.length/128),l=0;for(let e=r;e<n;e++)l+=t[e];let i=Math.max(0,Math.min(a,l/Math.max(1,n-r)/255*(1+(Math.random()-.5)*.06)*a)),c=(Math.random()-.5)*.8;O.fillRect(e*u+c,a-i,Math.max(1,u-1),i)}O.globalAlpha=.1,O.fillStyle="#00ff88";for(let e=0;e<a;e+=2)O.fillRect(0,e,n,1);if(O.globalAlpha=1,.08>Math.random()){let e=1+Math.floor(3*Math.random());for(let t=0;t<e;t++){let e=Math.random()*a,t=4+20*Math.random(),r=(Math.random()-.5)*12;O.globalCompositeOperation="lighter",O.drawImage(q,0,e,n,t,r,e,n,t),O.globalCompositeOperation="source-over"}}if(w.current){O.globalAlpha=.08+.05*Math.random();let e=Math.random()*(w.current.width-1),t=Math.random()*(w.current.height-1);O.drawImage(w.current,e,t,w.current.width-e,w.current.height-t,0,0,n,a),O.globalAlpha=1}h.current=requestAnimationFrame(P)};h.current=requestAnimationFrame(P),await n.resume(),r(!0)}return(0,a.useEffect)(()=>()=>{var e,t,r,n;null!=h.current&&cancelAnimationFrame(h.current),null==(e=g.current)||e.call(g);try{null==(r=m.current)||r.disconnect(),null==(n=d.current)||n.disconnect()}catch(e){}null==(t=o.current)||t.close().catch(()=>{}),m.current=null,d.current=null,o.current=null},[]),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"neon-panel grid gap-3 sm:gap-4 sm:grid-cols-12",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-3 sm:col-span-3",children:[(0,n.jsx)("button",{className:"border border-cyan-400/60 bg-[#0a0f1f]/80 text-cyan-100 py-2 px-5 rounded-lg shadow-[0_0_12px_#00eaff66] hover:bg-[#0f1a2f]/80 hover:shadow-[0_0_18px_#00eaffaa] transition w-full",onClick:()=>t?function(){var e,n,a,l,u,i;if(t||o.current){null!=h.current&&(cancelAnimationFrame(h.current),h.current=null),window.removeEventListener("resize",()=>{}),null==(e=g.current)||e.call(g),g.current=null;try{null==(a=m.current)||a.disconnect(),null==(l=d.current)||l.disconnect(),null==(u=p.current)||u.disconnect(),null==(i=f.current)||i.disconnect()}catch(e){}null==(n=o.current)||n.close().catch(()=>{}),m.current=null,d.current=null,p.current=null,f.current=null,o.current=null,r(!1)}}():v(),children:t?"Stop":"Start"}),(0,n.jsx)("button",{className:"relative w-full rounded-lg py-2 px-5 text-black font-semibold bg-gradient-to-r from-fuchsia-400 via-cyan-300 to-lime-300 hover:from-fuchsia-300 hover:via-cyan-200 hover:to-lime-200 shadow-[0_0_14px_#ff00ff66,0_0_24px_#00eaff55] border border-white/20 transition animate-pulse",onClick:function(){var e,t;null==(t=x.current)||null==(e=t.randomize)||e.call(t);let r=o.current;if(r){if(p.current){let e=Math.exp(Math.log(150)+Math.random()*(Math.log(14e3)-Math.log(150))),t=18*Math.random();p.current.frequency.setTargetAtTime(e,r.currentTime,.03),p.current.Q.setTargetAtTime(Math.max(1e-4,t),r.currentTime,.03)}if(f.current){let e=.18+.5*Math.random();f.current.gain.setTargetAtTime(e,r.currentTime,.03)}}},title:"Randomize the sound",children:"Randomize"})]}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 sm:col-span-9",children:[(0,n.jsxs)("label",{className:"flex items-center gap-2 text-cyan-200 w-full sm:w-auto",children:["Mix"," ",(0,n.jsx)("input",{ref:l,type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.55",className:"slider-neon w-full sm:w-[200px]"})]}),(0,n.jsxs)("label",{className:"flex items-center gap-2 text-lime-200 w-full sm:w-auto",children:["LPF",(0,n.jsx)("input",{ref:c,type:"range",min:"20",max:"20000",step:"1",defaultValue:"6000",className:"slider-neon accent-lime-400 w-full sm:w-[220px]"})]}),(0,n.jsxs)("label",{className:"flex items-center gap-2 text-lime-200 w-full sm:w-auto",children:["Res",(0,n.jsx)("input",{ref:s,type:"range",min:"0",max:"24",step:"0.01",defaultValue:"0.7",className:"slider-neon accent-lime-500 w-full sm:w-[200px]"})]}),(0,n.jsxs)("label",{className:"flex items-center gap-2 text-cyan-200 w-full sm:w-auto",children:["Width"," ",(0,n.jsx)("input",{ref:u,type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.9",className:"slider-neon w-full sm:w-[200px]"})]}),(0,n.jsxs)("label",{className:"flex items-center gap-2 text-pink-200 w-full sm:w-auto",children:["Volume",(0,n.jsx)("input",{ref:i,type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.3",className:"slider-neon accent-pink-500 w-full sm:w-[200px]"})]})]})]}),(0,n.jsx)("canvas",{ref:e,width:1024,height:256,className:"w-full rounded-xl bg-[#070a12] shadow-[0_0_24px_#00eaff44,0_0_48px_#ff00ff22] border border-white/10"})]})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=6221)),_N_E=e.O()}]);