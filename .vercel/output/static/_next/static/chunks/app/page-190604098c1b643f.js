(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6221:(e,t,n)=>{Promise.resolve().then(n.bind(n,8577))},8577:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(5155),a=n(2115);function l(){let e=(0,a.useRef)(null),[t,n]=(0,a.useState)(!1),l=(0,a.useRef)(null),u=(0,a.useRef)(null),i=(0,a.useRef)(null),c=(0,a.useRef)(null),s=(0,a.useRef)(null),o=(0,a.useRef)(null),d=(0,a.useRef)(null),m=(0,a.useRef)(null),f=(0,a.useRef)(null),p=(0,a.useRef)(null),h=(0,a.useRef)(null),w=(0,a.useRef)(null),x=(0,a.useRef)(null),g=(0,a.useRef)(null);async function v(){if(t)return;let r=new AudioContext({sampleRate:48e3});o.current=r;let a=new URL("/dsp/dsp.js",window.location.origin).toString();x.current=await import(a),await x.current.default("/dsp/dsp_bg.wasm"),x.current.init_engine(r.sampleRate),await r.audioWorklet.addModule("/worklet/processor.js");let v=new AudioWorkletNode(r,"rust-dsp",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[2]});m.current=v,v.port.postMessage({type:"config",sampleRate:r.sampleRate}),v.port.onmessage=e=>{var t,n;if((null==(t=e.data)?void 0:t.type)==="pull"){let t=new Float32Array(2*e.data.frames);null==(n=x.current)||n.render_into(t),v.port.postMessage({type:"block",buf:t},[t.buffer])}};let M=r.createAnalyser();M.fftSize=2048,d.current=M,v.connect(M);let y=r.createBiquadFilter();y.type="lowpass";let b=c.current?parseFloat(c.current.value):6e3,R=s.current?parseFloat(s.current.value):.7;y.frequency.value=isFinite(b)?b:6e3,y.Q.value=isFinite(R)?R:.7,p.current=y;let F=r.createGain();f.current=F;let _=i.current?parseFloat(i.current.value):.8;F.gain.value=isFinite(_)?_:.8,M.connect(y),y.connect(F),F.connect(r.destination);let N=()=>x.current.set_reverb(parseFloat(l.current.value),parseFloat(u.current.value));N();let E=l.current,j=u.current,C=i.current,A=c.current,L=s.current;E.addEventListener("input",N),j.addEventListener("input",N);let S=()=>{if(f.current&&i.current){let e=parseFloat(i.current.value);f.current.gain.value=isFinite(e)?e:f.current.gain.value}},k=()=>{if(p.current&&c.current&&o.current){let e=parseFloat(c.current.value);p.current.frequency.setTargetAtTime(Math.max(20,Math.min(2e4,isFinite(e)?e:p.current.frequency.value)),o.current.currentTime,.01)}},q=()=>{if(p.current&&s.current&&o.current){let e=parseFloat(s.current.value);p.current.Q.setTargetAtTime(Math.max(1e-4,isFinite(e)?e:p.current.Q.value),o.current.currentTime,.01)}};C.addEventListener("input",S),A.addEventListener("input",k),L.addEventListener("input",q),w.current=()=>{E.removeEventListener("input",N),j.removeEventListener("input",N),C.removeEventListener("input",S),A.removeEventListener("input",k),L.removeEventListener("input",q)};let O=e.current,T=O.getContext("2d"),V=()=>{let e=Math.max(1,Math.min(3,window.devicePixelRatio||1)),t=Math.max(300,Math.round(O.getBoundingClientRect().width)),n=Math.max(160,Math.min(480,Math.round(.28*t)));O.style.height="".concat(n,"px"),O.width=Math.floor(t*e),O.height=Math.floor(n*e),T.setTransform(1,0,0,1,0,0),T.scale(e,e)};V(),window.addEventListener("resize",()=>V());let I=document.createElement("canvas");I.width=256,I.height=256;let B=I.getContext("2d"),P=B.createImageData(I.width,I.height);for(let e=0;e<P.data.length;e+=4){let t=255*Math.random()|0;P.data[e+0]=0,P.data[e+1]=t,P.data[e+2]=0,P.data[e+3]=t>200?20:12}B.putImageData(P,0,0),g.current=I;let z=()=>{let e=d.current;if(!e)return;let t=new Uint8Array(e.frequencyBinCount),n=Math.max(1,Math.min(3,window.devicePixelRatio||1)),r=O.width/n,a=O.height/n;e.getByteFrequencyData(t),T.fillStyle="#070a12",T.fillRect(0,0,r,a);let l=T.createRadialGradient(.5*r,.5*a,.1*Math.min(r,a),.5*r,.5*a,.7*Math.max(r,a));l.addColorStop(0,"rgba(0,255,120,0.02)"),l.addColorStop(1,"rgba(0,0,0,0.35)"),T.fillStyle=l,T.fillRect(0,0,r,a);let u=r/128,i=T.createLinearGradient(0,a,0,0);i.addColorStop(0,"#093"),i.addColorStop(1,"#0f8"),T.fillStyle=i;for(let e=0;e<128;e++){let n=Math.floor(e*t.length/128),r=Math.floor((e+1)*t.length/128),l=0;for(let e=n;e<r;e++)l+=t[e];let i=Math.max(0,Math.min(a,l/Math.max(1,r-n)/255*(1+(Math.random()-.5)*.06)*a)),c=(Math.random()-.5)*.8;T.fillRect(e*u+c,a-i,Math.max(1,u-1),i)}T.globalAlpha=.1,T.fillStyle="#00ff88";for(let e=0;e<a;e+=2)T.fillRect(0,e,r,1);if(T.globalAlpha=1,.08>Math.random()){let e=1+Math.floor(3*Math.random());for(let t=0;t<e;t++){let e=Math.random()*a,t=4+20*Math.random(),n=(Math.random()-.5)*12;T.globalCompositeOperation="lighter",T.drawImage(O,0,e,r,t,n,e,r,t),T.globalCompositeOperation="source-over"}}if(g.current){T.globalAlpha=.08+.05*Math.random();let e=Math.random()*(g.current.width-1),t=Math.random()*(g.current.height-1);T.drawImage(g.current,e,t,g.current.width-e,g.current.height-t,0,0,r,a),T.globalAlpha=1}h.current=requestAnimationFrame(z)};h.current=requestAnimationFrame(z),await r.resume(),n(!0)}return(0,a.useEffect)(()=>()=>{var e,t,n,r;null!=h.current&&cancelAnimationFrame(h.current),null==(e=w.current)||e.call(w);try{null==(n=m.current)||n.disconnect(),null==(r=d.current)||r.disconnect()}catch(e){}null==(t=o.current)||t.close().catch(()=>{}),m.current=null,d.current=null,o.current=null},[]),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"neon-panel flex flex-wrap items-center gap-3 sm:gap-4",children:[(0,r.jsx)("button",{className:"border border-cyan-400/60 bg-[#0a0f1f]/80 text-cyan-100 py-2 px-5 rounded-lg shadow-[0_0_12px_#00eaff66] hover:bg-[#0f1a2f]/80 hover:shadow-[0_0_18px_#00eaffaa] transition w-full sm:w-auto",onClick:()=>t?function(){var e,r,a,l,u,i;if(t||o.current){null!=h.current&&(cancelAnimationFrame(h.current),h.current=null),window.removeEventListener("resize",()=>{}),null==(e=w.current)||e.call(w),w.current=null;try{null==(a=m.current)||a.disconnect(),null==(l=d.current)||l.disconnect(),null==(u=p.current)||u.disconnect(),null==(i=f.current)||i.disconnect()}catch(e){}null==(r=o.current)||r.close().catch(()=>{}),m.current=null,d.current=null,p.current=null,f.current=null,o.current=null,n(!1)}}():v(),children:t?"Stop":"Start"}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-cyan-200 w-full sm:w-auto",children:["Mix"," ",(0,r.jsx)("input",{ref:l,type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.55",className:"slider-neon w-full sm:w-[200px]"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-lime-200 w-full sm:w-auto",children:["LPF",(0,r.jsx)("input",{ref:c,type:"range",min:"20",max:"20000",step:"1",defaultValue:"6000",className:"slider-neon accent-lime-400 w-full sm:w-[220px]"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-lime-200 w-full sm:w-auto",children:["Res",(0,r.jsx)("input",{ref:s,type:"range",min:"0",max:"24",step:"0.01",defaultValue:"0.7",className:"slider-neon accent-lime-500 w-full sm:w-[200px]"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-cyan-200 w-full sm:w-auto",children:["Width"," ",(0,r.jsx)("input",{ref:u,type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.9",className:"slider-neon w-full sm:w-[200px]"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-pink-200 w-full sm:w-auto",children:["Volume",(0,r.jsx)("input",{ref:i,type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.8",className:"slider-neon accent-pink-500 w-full sm:w-[200px]"})]})]}),(0,r.jsx)("canvas",{ref:e,width:1024,height:256,className:"w-full rounded-xl bg-[#070a12] shadow-[0_0_24px_#00eaff44,0_0_48px_#ff00ff22] border border-white/10"})]})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=6221)),_N_E=e.O()}]);